package lib.models;

import java.util.Map;
import java.util.HashMap;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonElement;
import Helpers.ResponseObject;
import java.util.EnumSet;
{{#imports}}
{{#enums}}
import lib.enums.{{.}};
{{/enums}}
{{#models}}
import lib.models.{{.}};
{{/models}}
{{/imports}}

public class {{class_name}}{

    {{#properties}}
    {{#is_bitmask}}{{{raw_type}}}{{/is_bitmask}}{{^is_bitmask}}{{{property_type}}}{{/is_bitmask}} {{property_name}}; {{#is_bitmask}}EnumSet<{{property_type}}>{{#isArray}}[]{{/isArray}} {{property_name}}Set;{{/is_bitmask}}
    {{/properties}}
    JsonElement json;

    public {{class_name}}({{class_name}} model){
        GsonBuilder gsonBuilder = new GsonBuilder();
        Gson gson = gsonBuilder.create();
json = gson.toJsonTree(model);
{{class_name}} temp = model;
{{#properties}}
    this.{{property_name}} = temp.get{{Property_Name}}();
{{/properties}}
// Allows Garbage Collector to delete 'temp' to free up space
temp = null;
}

public {{class_name}}(JsonElement jsonElement){
try{
json = jsonElement;
GsonBuilder gsonBuilder = new GsonBuilder();
Gson gson = gsonBuilder.create();
{{class_name}} temp = gson.fromJson(jsonElement, {{class_name}}.class);
{{#properties}}
    this.{{property_name}} = temp.get{{Property_Name}}();
{{/properties}}
// Allows Garbage Collector to delete 'temp' to free up space
temp = null;
}catch(NullPointerException e){ }
}

{{#properties}}
    public {{#is_bitmask}}{{{raw_type}}}{{/is_bitmask}}{{^is_bitmask}}{{{property_type}}}{{/is_bitmask}} get{{Property_Name}}(){
    if({{property_name}} == null){
    {{#isArray}}return new {{#is_bitmask}}{{{raw_type}}}{{/is_bitmask}}{{^is_bitmask}}{{{property_type}}}{{/is_bitmask}}{ {{#isEnum}}{{^is_bitmask}}{{{cast_type}}}.getEnumFromValue({{raw_type}}.valueOf("0")){{/is_bitmask}}{{/isEnum}} };{{/isArray}}
    {{^isArray}}
        this.{{property_name}} = {{#isPrimitive}}{{{property_type}}}.valueOf("0")/*p*/{{/isPrimitive}}{{#isEnum}}{{#is_bitmask}}{{{raw_type}}}.valueOf("0")/*b*/{{/is_bitmask}}{{^is_bitmask}}{{{property_type}}}.getEnumFromValue({{raw_type}}.valueOf("0"))/*e*/{{/is_bitmask}}{{/isEnum}}
        {{^isEnum}}{{^isPrimitive}}new {{#isMap}}Hash{{/isMap}}{{{property_type}}}({{#isModel}}(JsonElement)null{{/isModel}}){{/isPrimitive}}{{/isEnum}}{{#isMap}}{}{{/isMap}};
    {{/isArray}}
    }
    return {{property_name}};
    }
    {{#is_bitmask}}public EnumSet<{{property_type}}>{{#isArray}}[]{{/isArray}} get{{Property_Name}}Set() {
    if({{property_name}}Set == null){
    {{#isArray}}for(int i = 0; i < {{property_name}}.length; i++){
    {{property_name}}Set[i] = {{/isArray}}{{property_type}}.fromType({{property_name}}{{#isArray}}[i]{{/isArray}});{{#isArray}}
        } {{/isArray}}
    }
    return {{property_name}}Set;
    }
    {{/is_bitmask}}
    {{#isRequest}}
    public void set{{Property_Name}}({{{property_type}}} {{property_name}}){
        this.{{property_name}} = {{property_name}};
    }
    {{/isRequest}}
    {{/properties}}
    public JsonElement getAsJson(){
        if(json==null){
            Gson gson = new Gson();
            json = gson.toJsonTree(this);
        }
        return json;}
}
